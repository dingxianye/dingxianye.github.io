<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Dingxian.Ye</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://dingxianye.me/"/>
  <updated>2019-04-03T15:59:14.917Z</updated>
  <id>http://dingxianye.me/</id>
  
  <author>
    <name>Derek</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>终于取到了Android的子网掩码</title>
    <link href="http://dingxianye.me/2019/04/03/%E7%BB%88%E4%BA%8E%E5%8F%96%E5%88%B0%E4%BA%86Android%E7%9A%84%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81/"/>
    <id>http://dingxianye.me/2019/04/03/终于取到了Android的子网掩码/</id>
    <published>2019-04-03T15:54:55.000Z</published>
    <updated>2019-04-03T15:59:14.917Z</updated>
    
    <content type="html"><![CDATA[<p>最近工作上有个需求是拿到Android手机的子网掩码（Subnet Mask、Netmask、Mask），但是我发现这事儿并不简单，因为无论是baidu还是google，给出来的答案都是没什么用的。</p><p>最常见的一般就是让你去拿到<code>WifiManager</code>，再拿到<code>DhcpInfo</code>，最后通过<code>intToIp(dhcpInfo.netmask)</code>拿到掩码，但是我告诉你，这种方法拿到的掩码往往是<code>0.0.0.0</code>，错的。至于为什么拿不到，google上也有很多讨论，可以自行搜索，似乎是一个延续了很多版本的bug，而且目前至少8.x上还是有问题的。</p><p>另一种是使用反射通过<code>ConnectivityManager</code>的hide方法<code>getActiveLinkProperties</code>拿到ip地址，再通过形如<code>n/xxx.xxx.xxx.xxx</code>的数据中<code>n</code>去算掩码（n表明的是掩码中前n位是1），但是我告诉你，这种方法拿到的ip地址往往是<code>/xxx.xxx.xxx.xxx</code>，没有<code>n</code>。</p><p>那应该怎么办？我找到了一种好方法，点进来看吧。</p><a id="more"></a><p><strong>其实方法很简单，我们发现通过linux提供的<code>ifconfig</code>在shell中是完全可以拿到子网掩码的，所以解决方案也就有了。</strong></p><ol><li>Android Manifest中添加<code>INTERNET</code>的权限（必须添加，否则ifconfig无法执行）</li><li><code>Runtime.getRuntime().exec(new String[] { &quot;ifconfig&quot; })</code>，再解析结果，拿出子网掩码</li></ol><p>具体的方法可以参考我的一个demo，有兴趣的朋友可以帮我改进demo里的解析方法，因为解析方法是不并保证适配了所有版本的系统（我是在8.x上测试的），demo地址如下：</p><p><a href="https://github.com/dingxianye/Demo/blob/master/app/src/main/java/me/dingxianye/demo/network/DXNetworkUtil.java" target="_blank" rel="noopener">src/main/java/me/dingxianye/demo/network/DXNetworkUtil.java</a></p><p>解析出来的每个网络连接的结果会放到下面的结构中<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DXIfconfig</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String inetAddr; <span class="comment">// ip</span></span><br><span class="line">    <span class="keyword">public</span> String bcast;    <span class="comment">// gateway</span></span><br><span class="line">    <span class="keyword">public</span> String mask;     <span class="comment">// netmask</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>我们之后就可以通过ip去拿到对应的子网掩码干活儿了。</p><blockquote><p>对于文章最前面提到的无效方法，也可以参看<a href="https://github.com/dingxianye/Demo/blob/master/app/src/main/java/me/dingxianye/demo/network/BadNetworkUtilDemo.java" target="_blank" rel="noopener">src/main/java/me/dingxianye/demo/network/BadNetworkUtilDemo.java</a>获得代码。</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近工作上有个需求是拿到Android手机的子网掩码（Subnet Mask、Netmask、Mask），但是我发现这事儿并不简单，因为无论是baidu还是google，给出来的答案都是没什么用的。&lt;/p&gt;
&lt;p&gt;最常见的一般就是让你去拿到&lt;code&gt;WifiManager&lt;/code&gt;，再拿到&lt;code&gt;DhcpInfo&lt;/code&gt;，最后通过&lt;code&gt;intToIp(dhcpInfo.netmask)&lt;/code&gt;拿到掩码，但是我告诉你，这种方法拿到的掩码往往是&lt;code&gt;0.0.0.0&lt;/code&gt;，错的。至于为什么拿不到，google上也有很多讨论，可以自行搜索，似乎是一个延续了很多版本的bug，而且目前至少8.x上还是有问题的。&lt;/p&gt;
&lt;p&gt;另一种是使用反射通过&lt;code&gt;ConnectivityManager&lt;/code&gt;的hide方法&lt;code&gt;getActiveLinkProperties&lt;/code&gt;拿到ip地址，再通过形如&lt;code&gt;n/xxx.xxx.xxx.xxx&lt;/code&gt;的数据中&lt;code&gt;n&lt;/code&gt;去算掩码（n表明的是掩码中前n位是1），但是我告诉你，这种方法拿到的ip地址往往是&lt;code&gt;/xxx.xxx.xxx.xxx&lt;/code&gt;，没有&lt;code&gt;n&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;那应该怎么办？我找到了一种好方法，点进来看吧。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>BlackBerry派</title>
    <link href="http://dingxianye.me/2019/03/16/BlackBerry%E6%B4%BE/"/>
    <id>http://dingxianye.me/2019/03/16/BlackBerry派/</id>
    <published>2019-03-16T10:55:33.000Z</published>
    <updated>2019-03-29T12:24:17.175Z</updated>
    
    <content type="html"><![CDATA[<p>BlackBerry，黑莓（BB）。<br>第一次知道这个名字是一种手机，全键盘，看起来很别致，很有现代感或者说科技感。<br>BB的历史不说了，我也说不清楚，不过BB现在被TCL收购了，而且最近也还出过新手机，最新的是<a href="https://blackberrymobile.com/cn/product/blackberry-key2/" target="_blank" rel="noopener">BB Key2，Android系统，全键盘直板，看起来还不错</a>，链接可以去BB官网，有3D模型可以看，PERFECT，整体机器看起来还是很不错的，但愿能一直走下去。</p><p><img src="http://www.berrylink.cn/wp-content/uploads/2019/02/blackberry-key2-red-silver-black-1-16p7o.jpg" alt="正面"></p><a id="more"></a><p><img src="http://www.berrylink.cn/wp-content/uploads/2019/02/blackberry-key2-red-silver-black-6-1lsth.jpg" alt="背面"></p><iframe style="width: 100%; height: 527px;" src="https://sketchfab.com/models/c4a1d0849496474285357f197d498215/embed?autostart=0&preload=1&scrollwheel=1&ui_color=white&ui_infos=0&ui_inspector=0&ui_settings=1&ui_vr=0&ui_watermark=1&ui_hint=1"></iframe><br>在BB官网上可以看到Key2的3D模型，使用的是Sketchfab展示的，很不错。<br><br>装了Android的BB，是没有灵魂的，但是比起有灵魂的可能更好挣钱，有了更多的应用，这样机器才可能卖得出去，BB才有可能活下来。<br>按照现在大行其道的<strong>大触屏+虚拟键盘</strong>的手机发展趋势下去，BB的物理键盘有什么优势呢？<br>看到BB官网上的介绍，物理键盘做了很多动作感应器，但这肯定不是优势，只是情怀中强加的科技感而已。就如微软强行要给PC装上大触屏是一个道理，要给触摸体验不好的东西加上触摸。<br>不过当下的手机，都没什么物理按键了，一般就有开关、音量、极少量功能键，以前还有相机键，现在也基本没看到了，更不会给到我们留什么快捷键了，BB有30+的按键，想怎么按我觉得都是可以商量的了，这也算个微小的优势吧。<br><br>不过，本文不是要讲BB的未来，而是讨论一下BB过去的东西。<br>我还用过好几款BB手机，但只有一款记忆很深刻，<a href="https://baike.baidu.com/pic/%E9%BB%91%E8%8E%937290/10995489/1044646/9319cf090a2844d5d0581beb?fr=lemma&amp;ct=cover#aid=358794&amp;pic=3b292df5e0fe99253e6e4baf34a85edf8cb171ea" target="_blank" rel="noopener">BB 7290</a>。<br><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1552798350165&amp;di=ed653c8a17ac44709991fab280c028b2&amp;imgtype=0&amp;src=http%3A%2F%2Fs3.sinaimg.cn%2Fbmiddle%2F62bc219dg77ad13b7cc52%26690" alt="BB7290"><br>交互方式很简单，侧面一颗带单按压的双向滚盘和一颗单按压的返回键，完成了选择确认和返回。屏幕很有意思，彩屏（颜色比较少），背光强度是一个物理按键调整的，在强光下屏幕更清晰，很特别。<br>我对BB的好感也是那个时候建立的，很独特的感觉，或许是当时没啥钱，看不了太多新奇的玩意儿吧。记得在学校听一个老外来忽悠我们向他们公司投简历的时候，就说到手机，并掏出了他的侧滑全键盘手机，还说这玩意儿就是个小型计算机，能帮他完成很多工作的事情，要知道当时Android也才1.x的版本，iphone也就4代的样子吧。<br><br>铺垫了这么久，终于进入正题，本文想说的其实是，<a href="http://www.dgtle.com/article-10898-1.html" target="_blank" rel="noopener">BB Q20 Classic</a>，普通全键盘，BB10系统，支持最高Android4.3的应用，非常好看（看链接看链接）。<br><!-- ![BBQ20Classic](http://s2.dgtle.com/forum/201506/26/024522iclepudh0jdwhz4h.jpg?imageView2/2/w/960/q/100) --><br><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1552830271981&amp;di=1fe1160e10b14193f247fb704dbd96cf&amp;imgtype=0&amp;src=http%3A%2F%2Fn.zdmimg.com%2F201411%2F14%2F5465c153cf1e1.jpg_v6.jpg" alt="BBQ20Classic"><br>链接文章的时间，2015年，这是一个很有历史的数字了，短短4年，已经走过了好长好长的路，前几周折拼手机都已经崭露头角，均价1w5吧，也有小米的传闻，6k给你搞定了。<br><br>BB Q20 Classic虽然使用的是BB10系统，这是灵魂，还支持了Android4.3应用，或许会有些兼容问题，版本也比较低，现在没有5.0起步都太过时了，想想Android现在9.0都出来了。<br>所以，应用方面，至少会比只支持BB系统的好一些，比如多看阅读，还能用，流畅度一般般，多看我也一直认为是非常优秀的App，也包括服务（特指被小米收购之前的多看），不过4.3的Android版本，好多App厂商已经不再支持了，比如微信，App还能安装和打开，就是无法登录了，就是不能用了，相当于微信这么庞大的App居然不维护Android4.3的版本了，这是非常坑的。<br><br>作为一名这么热爱有灵魂的BlackBerry手机的Android、iOS、Java全干的技术人员，是不是可以贡献一份力量呢？<br>基于Android4.3找找兼容的软件，或者是自己做一些有用的App，是不是可以呢？<br>找个地方，和志同道和的朋友聊一下BB，是不是可以呢？现在活跃的聊BB的地方是不是也没有了呢？<br>我要的就是触摸那些黑莓粒一样的按键时的感觉，也希望这种感觉能在时间流逝中保留下来。<br><br>后记<br>最近网上看到Key3的一些消息，物理键盘区似乎变得更小了，这意味着屏幕可以更大，我觉得这应该是BB的一个正向发展的趋势，不想死的就把屏幕做到可以变更大的可能，不想失去BB，就把物理键盘留下，好了，我觉得Key3就是这样了。<br><br>最近在网上（知乎等）看了些资料，或许TCL对BB的经营不是太理想，比如可以看看<a href="http://baijiahao.baidu.com/s?id=1603263182467828841&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">又要为信仰充值？网友吐槽黑莓KEY2：仅存的键盘情怀被TCL浇灭了</a>，也只是一方之言，我反正还没有用过Key2，主要是买不起（这点倒是大多数人都认同的，旗舰的价格中低端的配置），好吧，TCL的确没有经营好，品牌价值的透支永远不会是长久的。<br><br><strong>小计划</strong><br>1. 先来个微博吧，我平时还会看看微博，微博也提供三方API<br>2. GTD？想当年在用7290时使用备忘当过简单的TODO<br>3. Android版本的<a href="http://developer.blackberry.com/devzone/design/bb10/key_principles.html" target="_blank" rel="noopener">BB系统UI</a>组件<br><br>小计划中针对BB OS完成的内容，对于BB OS10上支持Android4.3的机器都是可以用的，比如还有当年非常流行的BB Passport，方方正正的，拿在手上显宽，比起现在总是长方形的手机来说，很有特色。<br><img src="https://api.price.com.hk/space/news/images/20141008/122.jpg" alt="BB Passport"><br><br>还有丢掉了物理键盘的<a href="https://image.baidu.com/search/index?tn=baiduimage&amp;ipn=r&amp;ct=201326592&amp;cl=2&amp;fm=detail&amp;lm=-1&amp;hd=undefined&amp;latest=undefined&amp;copyright=undefined&amp;st=-1&amp;sf=2&amp;fmq=&amp;fm=detail&amp;pv=&amp;ic=undefined&amp;nc=1&amp;z=0&amp;se=&amp;showtab=0&amp;fb=0&amp;width=undefined&amp;height=undefined&amp;face=0&amp;istype=2&amp;ie=utf-8&amp;word=%E9%BB%91%E8%8E%93Z10" target="_blank" rel="noopener">BB Z10</a>，BB Z20等等。<br><br>互联网上搜索到的一些Key2的评测和介绍，不评价优劣，都列在下面供大家索引，更希望有经济实力的同学们买来用用玩玩（拿目前竞品手机来对比，轻则4、5k，Key2还算好，只要3k+，不过也不是小数目了），大不了不用了闲鱼出售（快卖快卖，我好来买），至少TCL还会有想法出Key3吧 :)<br><em> <a href="http://zhongce.sina.com.cn/article/view/10302/" target="_blank" rel="noopener">你喜欢现在的黑莓吗？浅谈BlackBerry KEY2</a></em> <a href="https://baijiahao.baidu.com/s?id=1614191902042362402&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">物理键盘的回归——黑莓Key2评测（上篇）</a><br><em> <a href="https://baijiahao.baidu.com/s?id=1614193325134796825&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">物理键盘的回归——黑莓Key2评测（下篇）</a></em> <a href="https://baijiahao.baidu.com/s?id=1612740817504247261&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">黑莓 Key2：一部有着糟糕的芯片和物理键盘的手机</a><br><em> <a href="http://www.sohu.com/a/243265722_468726" target="_blank" rel="noopener">黑莓KEY2测评：因为它，我把自己当有钱人了！</a></em> <a href="https://baijiahao.baidu.com/s?id=1616550569586233010&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">以下是所有人最喜欢的黑莓KEY2功能，足以令你剁手</a><br><br>我在<a href="https://sketchfab.com" target="_blank" rel="noopener">Sketchfab</a>上找到了Q20 Classic的模型，很不错<br><iframe style="width: 100%; height: 527px;" src="https://sketchfab.com/models/627a3ce13dfc4fb4b2a13a09e55b070b/embed?autostart=0&preload=1&scrollwheel=1&ui_color=white&ui_infos=0&ui_inspector=0&ui_settings=1&ui_vr=0&ui_watermark=1&ui_hint=1"></iframe><p>还有passport的模型，也是非常棒的</p><iframe style="width: 100%; height: 527px;" src="https://sketchfab.com/models/f1b99fad6fe0466ab73427751012bac6/embed?autostart=0&preload=1&scrollwheel=1&ui_color=white&ui_infos=0&ui_inspector=0&ui_settings=1&ui_vr=0&ui_watermark=1&ui_hint=1"></iframe><hr><blockquote><p>注：文章图片均以链接方式引用自互联网，如有不适者，<a href="mailto:dingxian.ydx@gmail.com" target="_blank" rel="noopener">请联系作者删除</a>。</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;BlackBerry，黑莓（BB）。&lt;br&gt;第一次知道这个名字是一种手机，全键盘，看起来很别致，很有现代感或者说科技感。&lt;br&gt;BB的历史不说了，我也说不清楚，不过BB现在被TCL收购了，而且最近也还出过新手机，最新的是&lt;a href=&quot;https://blackberrymobile.com/cn/product/blackberry-key2/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;BB Key2，Android系统，全键盘直板，看起来还不错&lt;/a&gt;，链接可以去BB官网，有3D模型可以看，PERFECT，整体机器看起来还是很不错的，但愿能一直走下去。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.berrylink.cn/wp-content/uploads/2019/02/blackberry-key2-red-silver-black-1-16p7o.jpg&quot; alt=&quot;正面&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>开篇</title>
    <link href="http://dingxianye.me/2018/10/28/starter/"/>
    <id>http://dingxianye.me/2018/10/28/starter/</id>
    <published>2018-10-28T15:55:06.000Z</published>
    <updated>2018-10-28T15:55:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>我想你看到“开篇”这种标题的文件，应该不会点来的……</p><a id="more"></a><p>居然你点进来啦！</p><p>2018/10/28整理了一下久未整理的github博客，是时候要认真的写些东西，这篇就是开篇，测试一下主题、文章、使用hexo等等。</p><p>我是个程序员，但是很爱玩，所以文章主要是技术分享和旅游游记之类的，我想去日本，所以也会有些日语学习的内容。</p><p>就这样，我很忙……</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我想你看到“开篇”这种标题的文件，应该不会点来的……&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
